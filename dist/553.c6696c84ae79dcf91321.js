"use strict";(self.webpackChunkbabylonjs_fluid_rendering=self.webpackChunkbabylonjs_fluid_rendering||[]).push([[553],{553:(e,t,r)=>{r.r(t),r.d(t,{FluidSimulationDemoPrecomputeRendering:()=>s});var i=r(6291),n=r(9820);class s extends n.FluidSimulationDemoBase{constructor(e){super(e,!0),this._animSpeed=.5}async _run(){var e,t;const r=null!==(t=null===(e=this._scene.activeCameras)||void 0===e?void 0:e[0])&&void 0!==t?t:this._scene.activeCamera;r&&(r.alpha=-.631,r.beta=1.318,r.radius=1.866);const n=[];let s=0;for(let e=0;e<160;++e){const t="000"+(e+1),r=await(await fetch("../src/assets/particles/SphereDropGround/frame."+t.substring(t.length-4)+".pos")).arrayBuffer(),i=new Uint32Array(r),a=new Float32Array(r);s=i[0];const d=new Float32Array(3*s);for(let e=0;e<s;++e){const t=a[2+3*e+0],r=a[2+3*e+1],i=a[2+3*e+2];d[3*e+0]=t,d[3*e+1]=r,d[3*e+2]=-i}n.push(d)}this._fluidRenderObject.object.vertexBuffers.position=new i.VertexBuffer(this._engine,n[0],i.VertexBuffer.PositionKind,!0,!1,3,!0),this._fluidRenderObject.object.setNumParticles(s),this._fluidRenderObject.object.particleSize=.03,this._fluidRenderObject.object.particleThicknessAlpha=.007,this._fluidRenderObject.targetRenderer.minimumThickness=0,this._fluidRenderObject.targetRenderer.blurDepthFilterSize=10,this._fluidRenderObject.targetRenderer.blurDepthDepthScale=10,this._fluidRenderObject.targetRenderer.thicknessMapSize=256,this._fluidRenderObject.targetRenderer.refractionStrength=.1,this._fluidRenderObject.targetRenderer.blurThicknessFilterSize=5,this._fluidRenderObject.targetRenderer.blurThicknessNumIterations=1,this._fluidRenderObject.targetRenderer.density=3,this._fluidRenderObject.targetRenderer.specularPower=250;let a=0;this._sceneObserver=this._scene.onBeforeRenderObservable.add((()=>{this._fluidRenderObject.object.vertexBuffers.position.updateDirectly(n[Math.floor(a)],0),a+=this._animSpeed,a>=160&&(a=0)})),super._run()}_makeGUIMainMenu(){const e={animSpeed:this._animSpeed};this._gui.add(e,"animSpeed",0,1,.1).name("Animation speed").onChange((e=>{this._animSpeed=e}))}}}}]);
//# sourceMappingURL=553.c6696c84ae79dcf91321.js.map