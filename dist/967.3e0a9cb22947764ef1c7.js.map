{"version":3,"file":"967.3e0a9cb22947764ef1c7.js","mappings":"qNAAA,QAAe,IAA0B,uCCOlC,MAAMA,UAA0C,EAAAC,wBAGnDC,YAAYC,GACRC,MAAMD,GAAO,GAEbE,KAAKC,gBAAkB,KAGjBC,a,QACN,MAAMC,EAC4B,QAA9B,EAAyB,QAAzB,EAAAH,KAAKI,OAAOC,qBAAa,eAAG,UAAE,QAAIL,KAAKI,OAAOE,aAE9CH,IACCA,EAAmCI,MAAQ,EAC3CJ,EAAmCK,KAAOC,KAAKC,GAAK,IACpDP,EAAmCQ,OAAS,IAOjDX,KAAKC,gBAAkB,IAAI,iBACvB,YALiB,IAOjBD,KAAKI,QAITJ,KAAKC,gBAAgBW,gBAAkB,IAAI,UACvC,EACAZ,KAAKI,QAETJ,KAAKC,gBAAgBY,UAAY,+BAGjCb,KAAKC,gBAAgBa,kBAAkB,EAAGL,KAAKC,GAAK,GAGpDV,KAAKC,gBAAgBc,OAAS,IAAI,SAAe,GAAK,IAAK,GAAK,GAChEf,KAAKC,gBAAgBe,OAAS,IAAI,SAAe,GAAK,IAAK,GAAK,GAChEhB,KAAKC,gBAAgBgB,UAAY,IAAI,SAAe,EAAG,EAAG,GAAK,GAC/DjB,KAAKC,gBAAgBgB,UAAY,IAAI,SAAe,GAAK,EAAK,GAAK,GAGnEjB,KAAKC,gBAAgBiB,QAAU,IAC/BlB,KAAKC,gBAAgBkB,QAAU,IAG/BnB,KAAKC,gBAAgBmB,YAAc,EACnCpB,KAAKC,gBAAgBoB,YAAc,IAGnCrB,KAAKC,gBAAgBqB,SAlCQ,IAqC7BtB,KAAKC,gBAAgBsB,QAAU,IAAI,UAAgB,GAAI,MAAO,GAG9DvB,KAAKC,gBAAgBuB,aAAe,IACpCxB,KAAKC,gBAAgBwB,aAAe,IACpCzB,KAAKC,gBAAgByB,YAAc,IAGnC1B,KAAKC,gBAAgB0B,cAAgB,IAErC3B,KAAKC,gBAAgB2B,QAErB5B,KAAKC,gBAAgB4B,eAAgB,EAErC7B,KAAK8B,eAAeC,mBAAmB/B,KAAKgC,oBAAoB,GAEhEhC,KAAKgC,mBACDhC,KAAK8B,eAAgBG,kCACjBjC,KAAKC,iBAGbD,KAAKgC,mBAAmBE,OAAOC,aAAe,IAC9CnC,KAAKgC,mBAAmBE,OAAOE,uBAAyB,IAEpDpC,KAAKgC,mBAAmBE,OAC1BG,mCAAoC,EACtCrC,KAAKgC,mBAAmBM,eAAeC,iBACnCvC,KAAKgC,mBAAmBE,OAAOE,uBACnCpC,KAAKgC,mBAAmBM,eAAeE,oBAAsB,GAC7DxC,KAAKgC,mBAAmBM,eAAeG,oBAAsB,GAC7DzC,KAAKgC,mBAAmBM,eAAeI,iBAAmB,KAC1D1C,KAAKgC,mBAAmBM,eAAeK,QAAU,EACjD3C,KAAKgC,mBAAmBM,eAAeM,aAAe,IACtD5C,KAAKgC,mBAAmBM,eAAeO,WAAa,IAAI,SACpD,IAAM,IACN,IAAM,IACN,GAEJ7C,KAAKgC,mBAAmBM,eAAeQ,wBAAyB,EAEhE/C,MAAMgD,OAGHC,U,MACHjD,MAAMiD,UAEc,QAApB,EAAAhD,KAAKC,uBAAe,SAAE+C,UAGhBC,mBAKWjD,KAAKkD,KAGjBC,IAPU,CACXC,QAAQ,GAMK,UACZC,KAAK,SACLC,UAAUC,IACPvD,KAAKC,gBAAiByB,YAAc6B,EAAQ,EAAI","sources":["webpack://babylonjs-fluid-rendering/./src/assets/pictures/flare32bits.png","webpack://babylonjs-fluid-rendering/./src/scenes/fluidSimulationDemoParticleSystem.ts"],"sourcesContent":["export default __webpack_public_path__ + \"7c78419fe3f98a530df81b3e7a40909f.png\";","import * as BABYLON from \"@babylonjs/core\";\r\n\r\nimport { FluidSimulationDemoBase } from \"./fluidSimulationDemoBase\";\r\nimport { FluidRenderingObjectParticleSystem } from \"./FluidRenderer/fluidRenderingObjectParticleSystem\";\r\n\r\nimport flareImg from \"../assets/pictures/flare32bits.png\";\r\n\r\nexport class FluidSimulationDemoParticleSystem extends FluidSimulationDemoBase {\r\n    private _particleSystem: BABYLON.Nullable<BABYLON.ParticleSystem>;\r\n\r\n    constructor(scene: BABYLON.Scene) {\r\n        super(scene, true);\r\n\r\n        this._particleSystem = null;\r\n    }\r\n\r\n    protected async _run() {\r\n        const camera =\r\n            this._scene.activeCameras?.[0] ?? this._scene.activeCamera;\r\n\r\n        if (camera) {\r\n            (camera as BABYLON.ArcRotateCamera).alpha = 0;\r\n            (camera as BABYLON.ArcRotateCamera).beta = Math.PI / 2.4;\r\n            (camera as BABYLON.ArcRotateCamera).radius = 30;\r\n        }\r\n\r\n        const numParticles = 20000 * 2;\r\n        const numParticlesEmitRate = 1500 * 2;\r\n\r\n        // Create a particle system\r\n        this._particleSystem = new BABYLON.ParticleSystem(\r\n            \"particles\",\r\n            numParticles,\r\n            this._scene\r\n        );\r\n\r\n        //Texture of each particle\r\n        this._particleSystem.particleTexture = new BABYLON.Texture(\r\n            flareImg,\r\n            this._scene\r\n        );\r\n        this._particleSystem.blendMode = BABYLON.ParticleSystem.BLENDMODE_ADD;\r\n\r\n        // Where the particles come from\r\n        this._particleSystem.createConeEmitter(4, Math.PI / 2);\r\n\r\n        // Colors of all particles\r\n        this._particleSystem.color1 = new BABYLON.Color4(0.4, 1.5, 0.3, 1.0);\r\n        this._particleSystem.color2 = new BABYLON.Color4(0.4, 1.5, 0.3, 1.0);\r\n        this._particleSystem.colorDead = new BABYLON.Color4(0, 0, 0.2, 0.0);\r\n        this._particleSystem.colorDead = new BABYLON.Color4(0.4, 1.0, 0.3, 1.0);\r\n\r\n        // Size of each particle (random between...\r\n        this._particleSystem.minSize = 0.5 * 1.5;\r\n        this._particleSystem.maxSize = 0.5 * 1.5;\r\n\r\n        // Life time of each particle (random between...\r\n        this._particleSystem.minLifeTime = 2.0;\r\n        this._particleSystem.maxLifeTime = 2.5;\r\n\r\n        // Emission rate\r\n        this._particleSystem.emitRate = numParticlesEmitRate;\r\n\r\n        // Set the gravity of all particles\r\n        this._particleSystem.gravity = new BABYLON.Vector3(0, -10.81, 0);\r\n\r\n        // Speed\r\n        this._particleSystem.minEmitPower = 2.5;\r\n        this._particleSystem.maxEmitPower = 6.5;\r\n        this._particleSystem.updateSpeed = 0.02;\r\n\r\n        // Start the particle system\r\n        this._particleSystem.preWarmCycles = 60 * 8;\r\n\r\n        this._particleSystem.start();\r\n\r\n        this._particleSystem.renderAsFluid = true;\r\n\r\n        this._fluidRenderer.removeRenderObject(this._fluidRenderObject, true);\r\n\r\n        this._fluidRenderObject =\r\n            this._fluidRenderer!.getRenderObjectFromParticleSystem(\r\n                this._particleSystem\r\n            )!;\r\n\r\n        this._fluidRenderObject.object.particleSize = 0.75;\r\n        this._fluidRenderObject.object.particleThicknessAlpha = 0.02;\r\n        (\r\n            this._fluidRenderObject.object as FluidRenderingObjectParticleSystem\r\n        ).useTrueRenderingForDiffuseTexture = true;\r\n        this._fluidRenderObject.targetRenderer.minimumThickness =\r\n            this._fluidRenderObject.object.particleThicknessAlpha;\r\n        this._fluidRenderObject.targetRenderer.blurDepthFilterSize = 10;\r\n        this._fluidRenderObject.targetRenderer.blurDepthDepthScale = 10;\r\n        this._fluidRenderObject.targetRenderer.thicknessMapSize = 1024;\r\n        this._fluidRenderObject.targetRenderer.density = 8;\r\n        this._fluidRenderObject.targetRenderer.fresnelClamp = 0.04;\r\n        this._fluidRenderObject.targetRenderer.fluidColor = new BABYLON.Color3(\r\n            219 / 255,\r\n            228 / 255,\r\n            1\r\n        );\r\n        this._fluidRenderObject.targetRenderer.generateDiffuseTexture = false;\r\n\r\n        super._run();\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._particleSystem?.dispose();\r\n    }\r\n\r\n    protected _makeGUIMainMenu(): void {\r\n        const params = {\r\n            paused: false,\r\n        };\r\n\r\n        const mainMenu = this._gui!;\r\n\r\n        mainMenu\r\n            .add(params, \"paused\")\r\n            .name(\"Pause\")\r\n            .onChange((value: boolean) => {\r\n                this._particleSystem!.updateSpeed = value ? 0 : 0.02;\r\n            });\r\n    }\r\n}\r\n"],"names":["FluidSimulationDemoParticleSystem","FluidSimulationDemoBase","constructor","scene","super","this","_particleSystem","async","camera","_scene","activeCameras","activeCamera","alpha","beta","Math","PI","radius","particleTexture","blendMode","createConeEmitter","color1","color2","colorDead","minSize","maxSize","minLifeTime","maxLifeTime","emitRate","gravity","minEmitPower","maxEmitPower","updateSpeed","preWarmCycles","start","renderAsFluid","_fluidRenderer","removeRenderObject","_fluidRenderObject","getRenderObjectFromParticleSystem","object","particleSize","particleThicknessAlpha","useTrueRenderingForDiffuseTexture","targetRenderer","minimumThickness","blurDepthFilterSize","blurDepthDepthScale","thicknessMapSize","density","fresnelClamp","fluidColor","generateDiffuseTexture","_run","dispose","_makeGUIMainMenu","_gui","add","paused","name","onChange","value"],"sourceRoot":""}