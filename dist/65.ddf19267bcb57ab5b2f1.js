"use strict";(self.webpackChunkbabylonjs_fluid_rendering=self.webpackChunkbabylonjs_fluid_rendering||[]).push([[65],{4065:(e,i,t)=>{t.r(i),t.d(i,{FluidSimulationDemoHeightMap:()=>n});var s=t(6291),r=t(9820),a=t(4282);class n extends r.FluidSimulationDemoBase{constructor(e){super(e,!1),this._numParticles=1e4,this._particleGeneratorName="Water jet",this._time=0,this._showHeightmap=!0,this._sphere=null,this._box=null,this._heightMap=[null,null],this._groundCollision=null;const i=2.85;this.addCollisionSphere(new s.Vector3(0,.2,0),.2,null),this.addCollisionBox(new s.Vector3(-.7,.249,-.7),new s.Vector3(0,0,90*Math.PI/180),new s.Vector3(.2,.05,.5)),this.addCollisionTerrain(i),this.addCollisionPlane(new s.Vector3(0,0,-1),1.425),this.addCollisionPlane(new s.Vector3(0,0,1),1.425),this.addCollisionPlane(new s.Vector3(1,0,0),1.425),this.addCollisionPlane(new s.Vector3(-1,0,0),1.425),this.addCollisionPlane(new s.Vector3(0,1,0),0),this._ground=s.MeshBuilder.CreateGround("ground",{width:i,height:i},this._scene),this._ground.setEnabled(!1)}async _run(){var e,i;this._sphere=this._collisionObjects[0][0],this._box=this._collisionObjects[1][0],this._heightMap=this._collisionObjects[2],this._groundCollision=this._collisionObjects[7][1],this._groundCollision.disabled=!0,this._ground.material=this._heightMap[0].material;const t=null!==(i=null===(e=this._scene.activeCameras)||void 0===e?void 0:e[0])&&void 0!==i?i:this._scene.activeCamera;t&&(t.alpha=4.65,t.beta=1.12,t.radius=3.9),this._fluidRenderObject.targetRenderer.blurThicknessFilterSize=12,this._fluidRenderObject.targetRenderer.blurThicknessNumIterations=3,this._fluidRenderObject.targetRenderer.specularPower=50,this._fluidRenderObject.targetRenderer.refractionStrength=.02,this._fluidRenderObject.targetRenderer.density=5,this._createParticleGenerator(),super._run()}_createParticleGenerator(){var e,i;null===(e=this._particleGenerator)||void 0===e||e.dispose();let t="";switch(this._particleGeneratorName){case"Water jet":this._fluidRenderObject.object.particleSize=.08,this._fluidSim.smoothingRadius=.04,this._fluidSim.densityReference=2e4,this._fluidSim.pressureConstant=3,this._fluidSim.viscosity=.01,this._fluidSim.maxVelocity=3,this._fluidSim.maxAcceleration=2e3;break;case"Dragon 0.04":case"Dude 0.04":case"Sphere 0.04":this._fluidRenderObject.object.particleSize=.08,this._fluidSim.smoothingRadius=.08,this._fluidSim.densityReference=6e3,this._fluidSim.pressureConstant=10,this._fluidSim.viscosity=.01,this._fluidSim.maxVelocity=4,this._fluidSim.maxAcceleration=2e3,t="04";break;case"Dragon 0.03":case"Dude 0.03":case"Sphere 0.03":this._fluidRenderObject.object.particleSize=.06,this._fluidSim.smoothingRadius=.06,this._fluidSim.densityReference=17e3,this._fluidSim.pressureConstant=15,this._fluidSim.viscosity=.01,this._fluidSim.maxVelocity=4,this._fluidSim.maxAcceleration=2e3,t="03"}null===(i=this._fluidRendererGUI)||void 0===i||i.syncGUI(),this._syncFluidSimGUI(),this._particleGenerator=new a.ParticleGenerator(this._scene,""===t?void 0:this._particleGeneratorName.substring(0,this._particleGeneratorName.indexOf(" ")).toLocaleLowerCase()+"_"+t),this._particleGenerator.position.y=2,this._particleGenerator.position.z=.3,this._particleGenerator.particleRadius=this._fluidSim.smoothingRadius/2}dispose(){super.dispose(),this._ground.dispose()}_makeGUIMainMenu(){const e={restart:()=>{this._generateParticles()},particleGeneratorName:this._particleGeneratorName,showHeightmap:this._showHeightmap},i=this._gui;i.add(e,"restart").name("Restart"),i.add(e,"particleGeneratorName",["Water jet","Dragon 0.04","Dude 0.04","Sphere 0.04","Dragon 0.03","Dude 0.03","Sphere 0.03"]).name("Particle generator").onChange((async e=>{this._particleGeneratorName=e,this._createParticleGenerator(),await this._generateParticles(),"Water jet"!==e&&(this._numParticles=this._particleGenerator.currNumParticles),this._syncFluidSimGUI()})),i.add(e,"showHeightmap").name("Show height map").onChange((e=>{this._showHeightmap=e,this._ground.setEnabled(!e),this._groundCollision.disabled=e,this._heightMap[0].setEnabled(e),this._heightMap[1].disabled=!e}))}_checkCollisions(e){this._sphere.position.x=1.1*Math.cos(2*this._time/3.3),this._sphere.position.z=1.1*Math.sin(5*this._time/3.3),this._box.rotation.y=2*this._time,this._time+=.02,super._checkCollisions(e)}}}}]);
//# sourceMappingURL=65.ddf19267bcb57ab5b2f1.js.map