{"version":3,"file":"710.8057c0a0bc1899a43ea9.js","mappings":"8MAMO,MAAMA,UAAmC,EAAAC,wBAM5CC,YAAYC,GACRC,MAAMD,GAENE,KAAKC,iBAAmB,UACxBD,KAAKE,UAAY,KAEjBF,KAAKG,qBAAuB,KAC5BH,KAAKI,cAAgB,KAErBJ,KAAKK,kBAAkB,IAAI,UAAgB,EAAG,EAAG,GAAI,GAAK,IAE1DL,KAAKM,SAAS,cAGRC,eAAeC,EAAcC,GAAmB,GAGtD,OAFAT,KAAKE,UAAYM,EAETA,GACJ,IAAK,aACDR,KAAKU,iBACD,IAAI,UAAgB,KAAO,GAAK,GAChC,IAAI,UAAgB,EAAG,EAAG,GAC1B,iBACA,kBACA,EACA,KAEJ,MACJ,IAAK,SACDV,KAAKU,iBACD,IAAI,WAAiB,IAAM,IAAM,KACjC,IAAI,UAAgB,GAAI,EAAK,GAC7B,iBACA,kBACA,EACA,GAKRD,IACAT,KAAKW,wBAA0BC,QAAQC,IACnCb,KAAKc,2BAKVP,a,QAiCH,MAAMQ,EAC4B,QAA9B,EAAyB,QAAzB,EAAAf,KAAKgB,OAAOC,qBAAa,eAAG,UAAE,QAAIjB,KAAKgB,OAAOE,aAE9CH,IACCA,EAAmCI,MAAQ,KAC3CJ,EAAmCK,KAAO,KAC1CL,EAAmCM,OAAS,KAIjDrB,KAAKsB,mBAAmBC,OAAOC,aAAe,IAE9CxB,KAAKyB,UAAWC,gBAAkB,IAClC1B,KAAKyB,UAAWE,iBAAmB,IACnC3B,KAAKyB,UAAWG,iBAAmB,EACnC5B,KAAKyB,UAAWI,UAAY,KAC5B7B,KAAKyB,UAAWK,YAAc,GAC9B9B,KAAKyB,UAAWM,gBAAkB,IAElC/B,KAAKgC,2BAA6B,IAElChC,KAAKiC,mBAAoBC,SAASC,EAAI,GACtCnC,KAAKiC,mBAAoBC,SAASE,EAAI,IACtCpC,KAAKiC,mBAAoBC,SAASG,GAAK,IAEvCtC,MAAMuC,OAGHC,UACHxC,MAAMwC,UAENvC,KAAKgB,OAAOwB,yBAAyBC,OAAOzC,KAAKG,sBAG3CuC,mBACN,MAAMC,EAAS,CACXC,QAAS,KACL5C,KAAK6C,sBAETC,SAAU9C,KAAKE,WAGb6C,EAAW/C,KAAKgD,KAEtBD,EAASE,IAAIN,EAAQ,WAAWnC,KAAK,WAErCuC,EACKE,IAAIN,EAAQ,WAAY,CAAC,SAAU,eACnCnC,KAAK,QACL0C,UAAUC,IACPnD,KAAKoD,uBAAuBpD,KAAKW,kBAAkB0C,OAAS,GAC5DrD,KAAKM,SAAS6C,GAAO","sources":["webpack://babylonjs-fluid-rendering/./src/scenes/fluidSimulationDemoMeshSDF.ts"],"sourcesContent":["import * as BABYLON from \"@babylonjs/core\";\r\n//import * as BABYLONSER from \"@babylonjs/serializers\";\r\n\r\nimport { FluidSimulationDemoBase } from \"./fluidSimulationDemoBase\";\r\n\r\n// High heels model by cebraVFX found on Sketchfab (https://sketchfab.com/3d-models/high-heels-1561c09fc45349d680e48e3e007b64e0)\r\nexport class FluidSimulationDemoMeshSDF extends FluidSimulationDemoBase {\r\n    private _sceneRenderObserver: BABYLON.Nullable<\r\n        BABYLON.Observer<BABYLON.Scene>\r\n    >;\r\n    private _meshName: string;\r\n\r\n    constructor(scene: BABYLON.Scene) {\r\n        super(scene);\r\n\r\n        this._environmentFile = \"Parking\";\r\n        this._meshName = null as any;\r\n\r\n        this._sceneRenderObserver = null;\r\n        this._numParticles = 7500;\r\n\r\n        this.addCollisionPlane(new BABYLON.Vector3(0, 1, 0), 0.5, 0.3);\r\n\r\n        this._addMesh(\"High heels\");\r\n    }\r\n\r\n    protected async _addMesh(name: string, waitForReadiness = false) {\r\n        this._meshName = name;\r\n\r\n        switch (name) {\r\n            case \"High heels\":\r\n                this.addCollisionMesh(\r\n                    new BABYLON.Vector3(0.85, -0.5, 0),\r\n                    new BABYLON.Vector3(0, 0, 0),\r\n                    \"high_heels.obj\",\r\n                    \"high_heels.sdf\",\r\n                    false,\r\n                    0.03\r\n                );\r\n                break;\r\n            case \"Dragon\":\r\n                this.addCollisionMesh(\r\n                    new BABYLON.Vector3(-0.1, -0.5, -2.4),\r\n                    new BABYLON.Vector3(0, -1.0, 0),\r\n                    \"Dragon_50k.obj\",\r\n                    \"Dragon_50k.sdf\",\r\n                    true,\r\n                    3\r\n                );\r\n                break;\r\n        }\r\n\r\n        if (waitForReadiness) {\r\n            this._collisionObjects = await Promise.all(\r\n                this._collisionObjectPromises\r\n            );\r\n        }\r\n    }\r\n\r\n    public async _run() {\r\n        /*for (let i = 2; i <= 17; ++i) {\r\n            const m = this._scene.meshes[i] as BABYLON.Mesh;\r\n            m.bakeCurrentTransformIntoVertices();\r\n            m.parent = null;\r\n            m.scaling.setAll(10);\r\n            m.bakeCurrentTransformIntoVertices();\r\n        }\r\n\r\n        const mm = BABYLON.Mesh.MergeMeshes([\r\n            this._scene.meshes[2] as BABYLON.Mesh,\r\n            this._scene.meshes[3] as BABYLON.Mesh,\r\n            this._scene.meshes[4] as BABYLON.Mesh,\r\n            this._scene.meshes[5] as BABYLON.Mesh,\r\n            this._scene.meshes[6] as BABYLON.Mesh,\r\n            this._scene.meshes[7] as BABYLON.Mesh,\r\n            this._scene.meshes[8] as BABYLON.Mesh,\r\n            this._scene.meshes[9] as BABYLON.Mesh,\r\n            this._scene.meshes[10] as BABYLON.Mesh,\r\n            this._scene.meshes[11] as BABYLON.Mesh,\r\n            this._scene.meshes[12] as BABYLON.Mesh,\r\n            this._scene.meshes[13] as BABYLON.Mesh,\r\n            this._scene.meshes[14] as BABYLON.Mesh,\r\n            this._scene.meshes[15] as BABYLON.Mesh,\r\n            this._scene.meshes[16] as BABYLON.Mesh,\r\n            this._scene.meshes[17] as BABYLON.Mesh,\r\n        ], false, true, undefined, false, false);\r\n\r\n        console.log(BABYLONSER.OBJExport.OBJ([mm!]));\r\n\r\n        mm?.dispose();*/\r\n\r\n        // Reset camera\r\n        const camera =\r\n            this._scene.activeCameras?.[0] ?? this._scene.activeCamera;\r\n\r\n        if (camera) {\r\n            (camera as BABYLON.ArcRotateCamera).alpha = 2.62;\r\n            (camera as BABYLON.ArcRotateCamera).beta = 1.11;\r\n            (camera as BABYLON.ArcRotateCamera).radius = 8.4;\r\n        }\r\n\r\n        // Simulation parameters\r\n        this._fluidRenderObject.object.particleSize = 0.08;\r\n\r\n        this._fluidSim!.smoothingRadius = 0.04;\r\n        this._fluidSim!.densityReference = 20000;\r\n        this._fluidSim!.pressureConstant = 4;\r\n        this._fluidSim!.viscosity = 0.005;\r\n        this._fluidSim!.maxVelocity = 10;\r\n        this._fluidSim!.maxAcceleration = 2000;\r\n\r\n        this._shapeCollisionRestitution = 0.99;\r\n\r\n        this._particleGenerator!.position.x = 0.2;\r\n        this._particleGenerator!.position.y = 2.8;\r\n        this._particleGenerator!.position.z = -1.5;\r\n\r\n        super._run();\r\n    }\r\n\r\n    public dispose(): void {\r\n        super.dispose();\r\n\r\n        this._scene.onBeforeRenderObservable.remove(this._sceneRenderObserver);\r\n    }\r\n\r\n    protected _makeGUIMainMenu(): void {\r\n        const params = {\r\n            restart: () => {\r\n                this._generateParticles();\r\n            },\r\n            meshname: this._meshName,\r\n        };\r\n\r\n        const mainMenu = this._gui!;\r\n\r\n        mainMenu.add(params, \"restart\").name(\"Restart\");\r\n\r\n        mainMenu\r\n            .add(params, \"meshname\", [\"Dragon\", \"High heels\"])\r\n            .name(\"Name\")\r\n            .onChange((value: any) => {\r\n                this.disposeCollisionObject(this._collisionObjects.length - 1);\r\n                this._addMesh(value, true);\r\n            });\r\n    }\r\n}\r\n"],"names":["FluidSimulationDemoMeshSDF","FluidSimulationDemoBase","constructor","scene","super","this","_environmentFile","_meshName","_sceneRenderObserver","_numParticles","addCollisionPlane","_addMesh","async","name","waitForReadiness","addCollisionMesh","_collisionObjects","Promise","all","_collisionObjectPromises","camera","_scene","activeCameras","activeCamera","alpha","beta","radius","_fluidRenderObject","object","particleSize","_fluidSim","smoothingRadius","densityReference","pressureConstant","viscosity","maxVelocity","maxAcceleration","_shapeCollisionRestitution","_particleGenerator","position","x","y","z","_run","dispose","onBeforeRenderObservable","remove","_makeGUIMainMenu","params","restart","_generateParticles","meshname","mainMenu","_gui","add","onChange","value","disposeCollisionObject","length"],"sourceRoot":""}